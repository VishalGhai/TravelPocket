{"ast":null,"code":"// Note: In a real application, you would need to get your API key from environment variables\n// For now, we'll use a placeholder that should be replaced with your actual Gemini API key\nconst GEMINI_API_KEY = process.env.REACT_APP_GEMINI_API_KEY || 'your-gemini-api-key-here';\nconst GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent';\n\n// Helper function to show user-friendly alerts\nconst showErrorAlert = errorType => {\n  if (typeof window !== 'undefined') {\n    switch (errorType) {\n      case 'LLM_SERVICE_UNAVAILABLE':\n        alert('🚫 LLM Service Unavailable\\n\\nThe AI service is currently overloaded and not available. Please try again in a few minutes.\\n\\nWe\\'re using sample data for now so you can still explore the app!');\n        break;\n      case 'LLM_RATE_LIMIT_EXCEEDED':\n        alert('⏰ Rate Limit Exceeded\\n\\nYou\\'ve made too many requests. Please wait a moment before trying again.\\n\\nWe\\'re using sample data for now so you can still explore the app!');\n        break;\n      case 'LLM_API_KEY_INVALID':\n        alert('🔑 API Key Issue\\n\\nThere\\'s an issue with the API configuration. Please check your API key.\\n\\nWe\\'re using sample data for now so you can still explore the app!');\n        break;\n      default:\n        alert('❌ Error Generating Itinerary\\n\\nSomething went wrong while generating your itinerary. Please try again.\\n\\nWe\\'re using sample data for now so you can still explore the app!');\n    }\n  }\n};\n\n// Test function to debug API response\nexport const testGeminiAPI = async () => {\n  try {\n    const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        contents: [{\n          parts: [{\n            text: \"Hello, please respond with a simple JSON object: {\\\"message\\\": \\\"Hello World\\\"}\"\n          }]\n        }]\n      })\n    });\n    console.log('Test API Response Status:', response.status);\n    const data = await response.json();\n    console.log('Test API Response Data:', JSON.stringify(data, null, 2));\n    return data;\n  } catch (error) {\n    console.error('Test API Error:', error);\n    return null;\n  }\n};\nexport const generateItinerary = async travelData => {\n  const {\n    place,\n    motive,\n    budget,\n    currency,\n    includeTravelCost,\n    numberOfMembers,\n    numberOfDays\n  } = travelData;\n  try {\n    const prompt = `Create a detailed travel itinerary for ${numberOfMembers} person(s) visiting ${place} for ${numberOfDays} day(s) with a ${motive} trip motive. \n  Budget: ${budget} ${currency}${includeTravelCost ? ' (including travel costs)' : ' (excluding travel costs)'}.\n  \n  Please provide a comprehensive itinerary including:\n  1. Daily activities with specific times for each of the ${numberOfDays} days\n  2. Places to visit with descriptions\n  3. Food recommendations\n  4. Transportation options\n  5. Accommodation suggestions\n  6. Cost estimates for each activity\n  \n  IMPORTANT: \n  - Generate 20-30 different activity options for the activities array. Only include activities that users can choose from (sightseeing, tours, experiences, etc.). Do NOT include food, travel, accommodation, or other mandatory costs in the activities array.\n  - ALL prices must be in ${currency} currency. Convert all costs to ${currency} based on current exchange rates.\n  - Include the most famous activities for ${place} with motive of ${motive}.\n  - Keep response concise and under 8000 tokens.\n  \n  Return ONLY a valid JSON object with this structure:\n  {\n    \"itinerary\": {\"days\": [{\"day\": 1, \"date\": \"2024-01-01\", \"activities\": [{\"time\": \"09:00\", \"activity\": \"Activity\", \"place\": \"Location\", \"description\": \"Brief description\", \"costPerPerson\": 50, \"category\": \"activities\"}]}]},\n    \"activities\": [{\"id\": \"1\", \"name\": \"Activity\", \"place\": \"Location\", \"description\": \"Brief description\", \"costPerPerson\": 50, \"category\": \"activities\", \"duration\": \"2h\", \"bestTime\": \"morning\"}],\n    \"budgetBreakdown\": {\n      \"food\": {\"total\": 200, \"items\": [{\"name\": \"Restaurant Name\", \"place\": \"Location\", \"costPerPerson\": 25, \"description\": \"Meal description\"}]},\n      \"travel\": {\"total\": 300, \"items\": [{\"name\": \"Transport Type\", \"place\": \"Route\", \"costPerPerson\": 50, \"description\": \"Transport description\"}]},\n      \"accommodation\": {\"total\": 400, \"items\": [{\"name\": \"Hotel Name\", \"place\": \"Location\", \"costPerPerson\": 100, \"description\": \"Accommodation description\"}]},\n      \"other\": {\"total\": 50, \"items\": [{\"name\": \"Item Name\", \"place\": \"Location\", \"costPerPerson\": 25, \"description\": \"Item description\"}]}\n    },\n    \"totalEstimatedCost\": 1100\n  }`;\n    try {\n      const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          contents: [{\n            parts: [{\n              text: prompt\n            }]\n          }],\n          generationConfig: {\n            temperature: 0.7,\n            topK: 40,\n            topP: 0.95,\n            maxOutputTokens: 32768\n          }\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('Gemini API Error Details:', {\n          status: response.status,\n          statusText: response.statusText,\n          error: errorData\n        });\n\n        // Handle specific error cases\n        if (response.status === 503) {\n          throw new Error('LLM_SERVICE_UNAVAILABLE');\n        } else if (response.status === 429) {\n          throw new Error('LLM_RATE_LIMIT_EXCEEDED');\n        } else if (response.status === 401) {\n          throw new Error('LLM_API_KEY_INVALID');\n        } else {\n          throw new Error(`API request failed: ${response.status} ${response.statusText}`);\n        }\n      }\n      const data = await response.json();\n\n      // Log the full response to debug the structure\n      console.log('Full API Response:', JSON.stringify(data, null, 2));\n\n      // Check if there's an error in the response\n      if (data.error) {\n        console.error('API returned an error:', data.error);\n        throw new Error(`API Error: ${data.error.message || 'Unknown error'}`);\n      }\n      if (!data.candidates || !data.candidates[0]) {\n        console.error('No candidates in response:', data);\n        throw new Error('Invalid response format from Gemini API - no candidates');\n      }\n\n      // Check if response was truncated due to token limit\n      if (data.candidates[0].finishReason === 'MAX_TOKENS') {\n        console.warn('Response was truncated due to MAX_TOKENS limit. Using mock data instead.');\n        return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n      }\n\n      // Check if response was stopped for other reasons\n      if (data.candidates[0].finishReason && data.candidates[0].finishReason !== 'STOP') {\n        console.warn(`Response finished with reason: ${data.candidates[0].finishReason}. Using mock data instead.`);\n        return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n      }\n      if (!data.candidates[0].content) {\n        console.error('No content in first candidate:', data.candidates[0]);\n        throw new Error('Invalid response format from Gemini API - no content');\n      }\n      if (!data.candidates[0].content.parts || !data.candidates[0].content.parts[0]) {\n        console.error('No parts in content:', data.candidates[0].content);\n        throw new Error('Invalid response format from Gemini API - no parts');\n      }\n      const responseText = data.candidates[0].content.parts[0].text;\n      console.log('Response text:', responseText);\n      console.log('Response text length:', responseText.length);\n\n      // Try to parse the JSON response\n      try {\n        const jsonMatch = responseText.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n          const parsedData = JSON.parse(jsonMatch[0]);\n          console.log('Successfully parsed JSON response');\n          console.log('Number of activities in response:', parsedData.activities ? parsedData.activities.length : 'No activities array');\n          console.log('Activities:', parsedData.activities);\n          return parsedData;\n        } else {\n          console.error('No JSON found in response text');\n          throw new Error('No JSON found in response');\n        }\n      } catch (parseError) {\n        console.error('Failed to parse JSON response:', parseError);\n        console.error('Raw response text:', responseText);\n        throw new Error('Failed to parse API response as JSON');\n      }\n    } catch (error) {\n      console.error('Error calling Gemini API:', error);\n\n      // Handle specific error types\n      if (error.message === 'LLM_SERVICE_UNAVAILABLE') {\n        throw new Error('LLM_SERVICE_UNAVAILABLE');\n      } else if (error.message === 'LLM_RATE_LIMIT_EXCEEDED') {\n        throw new Error('LLM_RATE_LIMIT_EXCEEDED');\n      } else if (error.message === 'LLM_API_KEY_INVALID') {\n        throw new Error('LLM_API_KEY_INVALID');\n      } else {\n        // For other errors, fall back to mock data\n        console.warn('Falling back to mock data due to API error:', error.message);\n        return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n      }\n    }\n  } catch (error) {\n    // Handle specific error types - show alert but still provide mock data\n    if (error.message === 'LLM_SERVICE_UNAVAILABLE') {\n      console.warn('LLM service unavailable, using mock data');\n      showErrorAlert('LLM_SERVICE_UNAVAILABLE');\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    } else if (error.message === 'LLM_RATE_LIMIT_EXCEEDED') {\n      console.warn('Rate limit exceeded, using mock data');\n      showErrorAlert('LLM_RATE_LIMIT_EXCEEDED');\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    } else if (error.message === 'LLM_API_KEY_INVALID') {\n      console.warn('API key invalid, using mock data');\n      showErrorAlert('LLM_API_KEY_INVALID');\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    } else {\n      // For other errors, fall back to mock data\n      console.warn('Falling back to mock data due to unexpected error:', error.message);\n      showErrorAlert('GENERAL_ERROR');\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    }\n  }\n};\n\n// Mock response generator for development/testing\nconst generateMockResponse = (place, motive, budget, currency, numberOfMembers, numberOfDays) => {\n  const mockActivities = [{\n    id: '1',\n    name: 'City Walking Tour',\n    place: `${place} Historic Center`,\n    description: 'Explore the historic landmarks and cultural sites',\n    costPerPerson: 25,\n    category: 'activities',\n    duration: '3 hours',\n    bestTime: 'morning'\n  }, {\n    id: '2',\n    name: 'Museum Visit',\n    place: 'National Museum',\n    description: 'Learn about local history and culture',\n    costPerPerson: 15,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'afternoon'\n  }, {\n    id: '3',\n    name: 'Scenic Viewpoint',\n    place: 'Mountain Lookout',\n    description: 'Enjoy panoramic views of the city',\n    costPerPerson: 10,\n    category: 'activities',\n    duration: '1 hour',\n    bestTime: 'evening'\n  }, {\n    id: '4',\n    name: 'Art Gallery Tour',\n    place: 'Modern Art Gallery',\n    description: 'Discover contemporary local and international art',\n    costPerPerson: 20,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'afternoon'\n  }, {\n    id: '5',\n    name: 'Cultural Workshop',\n    place: 'Art Center',\n    description: 'Learn traditional crafts and techniques',\n    costPerPerson: 45,\n    category: 'activities',\n    duration: '3 hours',\n    bestTime: 'afternoon'\n  }, {\n    id: '6',\n    name: 'Nature Hike',\n    place: 'National Park',\n    description: 'Explore natural trails and observe local wildlife',\n    costPerPerson: 30,\n    category: 'activities',\n    duration: '4 hours',\n    bestTime: 'morning'\n  }, {\n    id: '7',\n    name: 'Boat Tour',\n    place: 'City Harbor',\n    description: 'Scenic boat ride with city skyline views',\n    costPerPerson: 35,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'afternoon'\n  }, {\n    id: '8',\n    name: 'Cooking Class',\n    place: 'Culinary School',\n    description: 'Learn to prepare authentic local dishes',\n    costPerPerson: 60,\n    category: 'activities',\n    duration: '3 hours',\n    bestTime: 'morning'\n  }, {\n    id: '9',\n    name: 'Photography Tour',\n    place: 'Historic District',\n    description: 'Capture the best shots with a professional guide',\n    costPerPerson: 40,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'evening'\n  }, {\n    id: '10',\n    name: 'Wine Tasting',\n    place: 'Local Winery',\n    description: 'Sample regional wines and learn about local viticulture',\n    costPerPerson: 50,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'afternoon'\n  }, {\n    id: '11',\n    name: 'Architecture Tour',\n    place: 'Downtown District',\n    description: 'Explore iconic buildings and architectural styles',\n    costPerPerson: 25,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'morning'\n  }, {\n    id: '12',\n    name: 'Music Performance',\n    place: 'Concert Hall',\n    description: 'Attend a classical or traditional music concert',\n    costPerPerson: 40,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'evening'\n  }, {\n    id: '13',\n    name: 'Market Tour',\n    place: 'Local Market',\n    description: 'Explore local markets and taste regional specialties',\n    costPerPerson: 20,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'morning'\n  }, {\n    id: '14',\n    name: 'Bike Tour',\n    place: 'City Streets',\n    description: 'Cycling tour through scenic neighborhoods',\n    costPerPerson: 30,\n    category: 'activities',\n    duration: '3 hours',\n    bestTime: 'morning'\n  }, {\n    id: '15',\n    name: 'Theater Show',\n    place: 'Historic Theater',\n    description: 'Watch a local theater production or musical',\n    costPerPerson: 35,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'evening'\n  }, {\n    id: '16',\n    name: 'Garden Tour',\n    place: 'Botanical Gardens',\n    description: 'Explore beautiful gardens and exotic plants',\n    costPerPerson: 15,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'afternoon'\n  }, {\n    id: '17',\n    name: 'Nightlife Tour',\n    place: 'Entertainment District',\n    description: 'Experience the local nightlife and bars',\n    costPerPerson: 45,\n    category: 'activities',\n    duration: '3 hours',\n    bestTime: 'evening'\n  }, {\n    id: '18',\n    name: 'Adventure Park',\n    place: 'Outdoor Adventure Center',\n    description: 'Try zip-lining, rock climbing, and outdoor activities',\n    costPerPerson: 55,\n    category: 'activities',\n    duration: '4 hours',\n    bestTime: 'morning'\n  }, {\n    id: '19',\n    name: 'Historical Site Visit',\n    place: 'Ancient Ruins',\n    description: 'Explore historical monuments and archaeological sites',\n    costPerPerson: 20,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'morning'\n  }, {\n    id: '20',\n    name: 'Spa Experience',\n    place: 'Luxury Spa',\n    description: 'Relax with traditional treatments and massages',\n    costPerPerson: 80,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'afternoon'\n  }, {\n    id: '21',\n    name: 'Food Market Tour',\n    place: 'Local Market',\n    description: 'Explore local cuisine and food culture',\n    costPerPerson: 35,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'morning'\n  }, {\n    id: '22',\n    name: 'Photography Walk',\n    place: 'Scenic Routes',\n    description: 'Capture the best photo spots with a guide',\n    costPerPerson: 40,\n    category: 'activities',\n    duration: '3 hours',\n    bestTime: 'evening'\n  }, {\n    id: '23',\n    name: 'Local Festival',\n    place: 'Town Square',\n    description: 'Experience traditional celebrations and events',\n    costPerPerson: 15,\n    category: 'activities',\n    duration: '4 hours',\n    bestTime: 'afternoon'\n  }, {\n    id: '24',\n    name: 'Wine Tasting',\n    place: 'Vineyard',\n    description: 'Sample local wines and learn about production',\n    costPerPerson: 60,\n    category: 'activities',\n    duration: '2 hours',\n    bestTime: 'afternoon'\n  }, {\n    id: '25',\n    name: 'Hiking Trail',\n    place: 'Nature Reserve',\n    description: 'Explore scenic hiking paths and nature',\n    costPerPerson: 25,\n    category: 'activities',\n    duration: '4 hours',\n    bestTime: 'morning'\n  }];\n  const budgetAmount = parseInt(budget) || 1000;\n  const budgetBreakdown = {\n    food: {\n      total: Math.floor(budgetAmount * 0.3),\n      items: [{\n        name: \"Local Restaurant\",\n        place: \"Downtown\",\n        costPerPerson: Math.floor(budgetAmount * 0.15),\n        description: \"Traditional local cuisine\"\n      }, {\n        name: \"Street Food\",\n        place: \"Market Area\",\n        costPerPerson: Math.floor(budgetAmount * 0.1),\n        description: \"Authentic street food experience\"\n      }, {\n        name: \"Café\",\n        place: \"City Center\",\n        costPerPerson: Math.floor(budgetAmount * 0.05),\n        description: \"Coffee and light meals\"\n      }]\n    },\n    travel: {\n      total: Math.floor(budgetAmount * 0.25),\n      items: [{\n        name: \"Airport Transfer\",\n        place: \"Airport to Hotel\",\n        costPerPerson: Math.floor(budgetAmount * 0.1),\n        description: \"Taxi or shuttle service\"\n      }, {\n        name: \"Local Transport\",\n        place: \"City\",\n        costPerPerson: Math.floor(budgetAmount * 0.1),\n        description: \"Public transport and taxis\"\n      }, {\n        name: \"Intercity Travel\",\n        place: \"Between cities\",\n        costPerPerson: Math.floor(budgetAmount * 0.05),\n        description: \"Train or bus tickets\"\n      }]\n    },\n    accommodation: {\n      total: Math.floor(budgetAmount * 0.2),\n      items: [{\n        name: \"Hotel\",\n        place: \"City Center\",\n        costPerPerson: Math.floor(budgetAmount * 0.2),\n        description: \"Comfortable accommodation\"\n      }]\n    },\n    other: {\n      total: Math.floor(budgetAmount * 0.05),\n      items: [{\n        name: \"Souvenirs\",\n        place: \"Local Shops\",\n        costPerPerson: Math.floor(budgetAmount * 0.03),\n        description: \"Memorabilia and gifts\"\n      }, {\n        name: \"Miscellaneous\",\n        place: \"Various\",\n        costPerPerson: Math.floor(budgetAmount * 0.02),\n        description: \"Unexpected expenses\"\n      }]\n    }\n  };\n\n  // Adjust activity prices based on currency (rough conversion for demo)\n  const getCurrencyMultiplier = curr => {\n    const multipliers = {\n      'USD': 1.0,\n      'EUR': 0.85,\n      'GBP': 0.75,\n      'JPY': 110,\n      'INR': 75,\n      'CAD': 1.25,\n      'AUD': 1.35\n    };\n    return multipliers[curr] || 1.0;\n  };\n  const currencyMultiplier = getCurrencyMultiplier(currency);\n  const adjustedActivities = mockActivities.map(activity => ({\n    ...activity,\n    costPerPerson: Math.round(activity.costPerPerson * currencyMultiplier)\n  }));\n\n  // Generate days based on numberOfDays\n  const generateDays = () => {\n    const days = [];\n    for (let i = 1; i <= numberOfDays; i++) {\n      const date = new Date(Date.now() + (i - 1) * 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n      const activitiesPerDay = Math.ceil(adjustedActivities.length / numberOfDays);\n      const startIndex = (i - 1) * activitiesPerDay;\n      const endIndex = Math.min(startIndex + activitiesPerDay, adjustedActivities.length);\n      days.push({\n        day: i,\n        date: date,\n        activities: adjustedActivities.slice(startIndex, endIndex).map(activity => ({\n          time: '09:00',\n          activity: activity.name,\n          place: activity.place,\n          description: activity.description,\n          costPerPerson: activity.costPerPerson,\n          category: activity.category\n        }))\n      });\n    }\n    return days;\n  };\n  return {\n    itinerary: {\n      days: generateDays()\n    },\n    activities: adjustedActivities,\n    budgetBreakdown,\n    totalEstimatedCost: budgetAmount\n  };\n};","map":{"version":3,"names":["GEMINI_API_KEY","process","env","REACT_APP_GEMINI_API_KEY","GEMINI_API_URL","showErrorAlert","errorType","window","alert","testGeminiAPI","response","fetch","method","headers","body","JSON","stringify","contents","parts","text","console","log","status","data","json","error","generateItinerary","travelData","place","motive","budget","currency","includeTravelCost","numberOfMembers","numberOfDays","prompt","generationConfig","temperature","topK","topP","maxOutputTokens","ok","errorData","catch","statusText","Error","message","candidates","finishReason","warn","generateMockResponse","content","responseText","length","jsonMatch","match","parsedData","parse","activities","parseError","mockActivities","id","name","description","costPerPerson","category","duration","bestTime","budgetAmount","parseInt","budgetBreakdown","food","total","Math","floor","items","travel","accommodation","other","getCurrencyMultiplier","curr","multipliers","currencyMultiplier","adjustedActivities","map","activity","round","generateDays","days","i","date","Date","now","toISOString","split","activitiesPerDay","ceil","startIndex","endIndex","min","push","day","slice","time","itinerary","totalEstimatedCost"],"sources":["/Users/vishalghai/Downloads/TravelPocket/src/services/geminiApi.js"],"sourcesContent":["// Note: In a real application, you would need to get your API key from environment variables\n// For now, we'll use a placeholder that should be replaced with your actual Gemini API key\nconst GEMINI_API_KEY = process.env.REACT_APP_GEMINI_API_KEY || 'your-gemini-api-key-here';\nconst GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent';\n\n// Helper function to show user-friendly alerts\nconst showErrorAlert = (errorType) => {\n  if (typeof window !== 'undefined') {\n    switch (errorType) {\n      case 'LLM_SERVICE_UNAVAILABLE':\n        alert('🚫 LLM Service Unavailable\\n\\nThe AI service is currently overloaded and not available. Please try again in a few minutes.\\n\\nWe\\'re using sample data for now so you can still explore the app!');\n        break;\n      case 'LLM_RATE_LIMIT_EXCEEDED':\n        alert('⏰ Rate Limit Exceeded\\n\\nYou\\'ve made too many requests. Please wait a moment before trying again.\\n\\nWe\\'re using sample data for now so you can still explore the app!');\n        break;\n      case 'LLM_API_KEY_INVALID':\n        alert('🔑 API Key Issue\\n\\nThere\\'s an issue with the API configuration. Please check your API key.\\n\\nWe\\'re using sample data for now so you can still explore the app!');\n        break;\n      default:\n        alert('❌ Error Generating Itinerary\\n\\nSomething went wrong while generating your itinerary. Please try again.\\n\\nWe\\'re using sample data for now so you can still explore the app!');\n    }\n  }\n};\n\n// Test function to debug API response\nexport const testGeminiAPI = async () => {\n  try {\n    const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        contents: [{\n          parts: [{\n            text: \"Hello, please respond with a simple JSON object: {\\\"message\\\": \\\"Hello World\\\"}\"\n          }]\n        }]\n      })\n    });\n\n    console.log('Test API Response Status:', response.status);\n    const data = await response.json();\n    console.log('Test API Response Data:', JSON.stringify(data, null, 2));\n    return data;\n  } catch (error) {\n    console.error('Test API Error:', error);\n    return null;\n  }\n};\n\nexport const generateItinerary = async (travelData) => {\n  const { place, motive, budget, currency, includeTravelCost, numberOfMembers, numberOfDays } = travelData;\n  \n  try {\n  \n  const prompt = `Create a detailed travel itinerary for ${numberOfMembers} person(s) visiting ${place} for ${numberOfDays} day(s) with a ${motive} trip motive. \n  Budget: ${budget} ${currency}${includeTravelCost ? ' (including travel costs)' : ' (excluding travel costs)'}.\n  \n  Please provide a comprehensive itinerary including:\n  1. Daily activities with specific times for each of the ${numberOfDays} days\n  2. Places to visit with descriptions\n  3. Food recommendations\n  4. Transportation options\n  5. Accommodation suggestions\n  6. Cost estimates for each activity\n  \n  IMPORTANT: \n  - Generate 20-30 different activity options for the activities array. Only include activities that users can choose from (sightseeing, tours, experiences, etc.). Do NOT include food, travel, accommodation, or other mandatory costs in the activities array.\n  - ALL prices must be in ${currency} currency. Convert all costs to ${currency} based on current exchange rates.\n  - Include the most famous activities for ${place} with motive of ${motive}.\n  - Keep response concise and under 8000 tokens.\n  \n  Return ONLY a valid JSON object with this structure:\n  {\n    \"itinerary\": {\"days\": [{\"day\": 1, \"date\": \"2024-01-01\", \"activities\": [{\"time\": \"09:00\", \"activity\": \"Activity\", \"place\": \"Location\", \"description\": \"Brief description\", \"costPerPerson\": 50, \"category\": \"activities\"}]}]},\n    \"activities\": [{\"id\": \"1\", \"name\": \"Activity\", \"place\": \"Location\", \"description\": \"Brief description\", \"costPerPerson\": 50, \"category\": \"activities\", \"duration\": \"2h\", \"bestTime\": \"morning\"}],\n    \"budgetBreakdown\": {\n      \"food\": {\"total\": 200, \"items\": [{\"name\": \"Restaurant Name\", \"place\": \"Location\", \"costPerPerson\": 25, \"description\": \"Meal description\"}]},\n      \"travel\": {\"total\": 300, \"items\": [{\"name\": \"Transport Type\", \"place\": \"Route\", \"costPerPerson\": 50, \"description\": \"Transport description\"}]},\n      \"accommodation\": {\"total\": 400, \"items\": [{\"name\": \"Hotel Name\", \"place\": \"Location\", \"costPerPerson\": 100, \"description\": \"Accommodation description\"}]},\n      \"other\": {\"total\": 50, \"items\": [{\"name\": \"Item Name\", \"place\": \"Location\", \"costPerPerson\": 25, \"description\": \"Item description\"}]}\n    },\n    \"totalEstimatedCost\": 1100\n  }`;\n\n  try {\n    const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        contents: [{\n          parts: [{\n            text: prompt\n          }]\n        }],\n        generationConfig: {\n          temperature: 0.7,\n          topK: 40,\n          topP: 0.95,\n          maxOutputTokens: 32768,\n        }\n      })\n    });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('Gemini API Error Details:', {\n          status: response.status,\n          statusText: response.statusText,\n          error: errorData\n        });\n        \n        // Handle specific error cases\n        if (response.status === 503) {\n          throw new Error('LLM_SERVICE_UNAVAILABLE');\n        } else if (response.status === 429) {\n          throw new Error('LLM_RATE_LIMIT_EXCEEDED');\n        } else if (response.status === 401) {\n          throw new Error('LLM_API_KEY_INVALID');\n        } else {\n          throw new Error(`API request failed: ${response.status} ${response.statusText}`);\n        }\n      }\n\n    const data = await response.json();\n    \n    // Log the full response to debug the structure\n    console.log('Full API Response:', JSON.stringify(data, null, 2));\n    \n    // Check if there's an error in the response\n    if (data.error) {\n      console.error('API returned an error:', data.error);\n      throw new Error(`API Error: ${data.error.message || 'Unknown error'}`);\n    }\n    \n    if (!data.candidates || !data.candidates[0]) {\n      console.error('No candidates in response:', data);\n      throw new Error('Invalid response format from Gemini API - no candidates');\n    }\n    \n    // Check if response was truncated due to token limit\n    if (data.candidates[0].finishReason === 'MAX_TOKENS') {\n      console.warn('Response was truncated due to MAX_TOKENS limit. Using mock data instead.');\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    }\n    \n    // Check if response was stopped for other reasons\n    if (data.candidates[0].finishReason && data.candidates[0].finishReason !== 'STOP') {\n      console.warn(`Response finished with reason: ${data.candidates[0].finishReason}. Using mock data instead.`);\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    }\n    \n    if (!data.candidates[0].content) {\n      console.error('No content in first candidate:', data.candidates[0]);\n      throw new Error('Invalid response format from Gemini API - no content');\n    }\n    \n    if (!data.candidates[0].content.parts || !data.candidates[0].content.parts[0]) {\n      console.error('No parts in content:', data.candidates[0].content);\n      throw new Error('Invalid response format from Gemini API - no parts');\n    }\n\n    const responseText = data.candidates[0].content.parts[0].text;\n    \n    console.log('Response text:', responseText);\n    console.log('Response text length:', responseText.length);\n    \n    // Try to parse the JSON response\n    try {\n      const jsonMatch = responseText.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        const parsedData = JSON.parse(jsonMatch[0]);\n        console.log('Successfully parsed JSON response');\n        console.log('Number of activities in response:', parsedData.activities ? parsedData.activities.length : 'No activities array');\n        console.log('Activities:', parsedData.activities);\n        return parsedData;\n      } else {\n        console.error('No JSON found in response text');\n        throw new Error('No JSON found in response');\n      }\n    } catch (parseError) {\n      console.error('Failed to parse JSON response:', parseError);\n      console.error('Raw response text:', responseText);\n      throw new Error('Failed to parse API response as JSON');\n    }\n    \n  } catch (error) {\n    console.error('Error calling Gemini API:', error);\n    \n    // Handle specific error types\n    if (error.message === 'LLM_SERVICE_UNAVAILABLE') {\n      throw new Error('LLM_SERVICE_UNAVAILABLE');\n    } else if (error.message === 'LLM_RATE_LIMIT_EXCEEDED') {\n      throw new Error('LLM_RATE_LIMIT_EXCEEDED');\n    } else if (error.message === 'LLM_API_KEY_INVALID') {\n      throw new Error('LLM_API_KEY_INVALID');\n    } else {\n      // For other errors, fall back to mock data\n      console.warn('Falling back to mock data due to API error:', error.message);\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    }\n  }\n  \n  } catch (error) {\n    // Handle specific error types - show alert but still provide mock data\n    if (error.message === 'LLM_SERVICE_UNAVAILABLE') {\n      console.warn('LLM service unavailable, using mock data');\n      showErrorAlert('LLM_SERVICE_UNAVAILABLE');\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    } else if (error.message === 'LLM_RATE_LIMIT_EXCEEDED') {\n      console.warn('Rate limit exceeded, using mock data');\n      showErrorAlert('LLM_RATE_LIMIT_EXCEEDED');\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    } else if (error.message === 'LLM_API_KEY_INVALID') {\n      console.warn('API key invalid, using mock data');\n      showErrorAlert('LLM_API_KEY_INVALID');\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    } else {\n      // For other errors, fall back to mock data\n      console.warn('Falling back to mock data due to unexpected error:', error.message);\n      showErrorAlert('GENERAL_ERROR');\n      return generateMockResponse(place, motive, budget, currency, numberOfMembers, numberOfDays);\n    }\n  }\n};\n\n// Mock response generator for development/testing\nconst generateMockResponse = (place, motive, budget, currency, numberOfMembers, numberOfDays) => {\n  const mockActivities = [\n    {\n      id: '1',\n      name: 'City Walking Tour',\n      place: `${place} Historic Center`,\n      description: 'Explore the historic landmarks and cultural sites',\n      costPerPerson: 25,\n      category: 'activities',\n      duration: '3 hours',\n      bestTime: 'morning'\n    },\n    {\n      id: '2',\n      name: 'Museum Visit',\n      place: 'National Museum',\n      description: 'Learn about local history and culture',\n      costPerPerson: 15,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'afternoon'\n    },\n    {\n      id: '3',\n      name: 'Scenic Viewpoint',\n      place: 'Mountain Lookout',\n      description: 'Enjoy panoramic views of the city',\n      costPerPerson: 10,\n      category: 'activities',\n      duration: '1 hour',\n      bestTime: 'evening'\n    },\n    {\n      id: '4',\n      name: 'Art Gallery Tour',\n      place: 'Modern Art Gallery',\n      description: 'Discover contemporary local and international art',\n      costPerPerson: 20,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'afternoon'\n    },\n    {\n      id: '5',\n      name: 'Cultural Workshop',\n      place: 'Art Center',\n      description: 'Learn traditional crafts and techniques',\n      costPerPerson: 45,\n      category: 'activities',\n      duration: '3 hours',\n      bestTime: 'afternoon'\n    },\n    {\n      id: '6',\n      name: 'Nature Hike',\n      place: 'National Park',\n      description: 'Explore natural trails and observe local wildlife',\n      costPerPerson: 30,\n      category: 'activities',\n      duration: '4 hours',\n      bestTime: 'morning'\n    },\n    {\n      id: '7',\n      name: 'Boat Tour',\n      place: 'City Harbor',\n      description: 'Scenic boat ride with city skyline views',\n      costPerPerson: 35,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'afternoon'\n    },\n    {\n      id: '8',\n      name: 'Cooking Class',\n      place: 'Culinary School',\n      description: 'Learn to prepare authentic local dishes',\n      costPerPerson: 60,\n      category: 'activities',\n      duration: '3 hours',\n      bestTime: 'morning'\n    },\n    {\n      id: '9',\n      name: 'Photography Tour',\n      place: 'Historic District',\n      description: 'Capture the best shots with a professional guide',\n      costPerPerson: 40,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'evening'\n    },\n    {\n      id: '10',\n      name: 'Wine Tasting',\n      place: 'Local Winery',\n      description: 'Sample regional wines and learn about local viticulture',\n      costPerPerson: 50,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'afternoon'\n    },\n    {\n      id: '11',\n      name: 'Architecture Tour',\n      place: 'Downtown District',\n      description: 'Explore iconic buildings and architectural styles',\n      costPerPerson: 25,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'morning'\n    },\n    {\n      id: '12',\n      name: 'Music Performance',\n      place: 'Concert Hall',\n      description: 'Attend a classical or traditional music concert',\n      costPerPerson: 40,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'evening'\n    },\n    {\n      id: '13',\n      name: 'Market Tour',\n      place: 'Local Market',\n      description: 'Explore local markets and taste regional specialties',\n      costPerPerson: 20,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'morning'\n    },\n    {\n      id: '14',\n      name: 'Bike Tour',\n      place: 'City Streets',\n      description: 'Cycling tour through scenic neighborhoods',\n      costPerPerson: 30,\n      category: 'activities',\n      duration: '3 hours',\n      bestTime: 'morning'\n    },\n    {\n      id: '15',\n      name: 'Theater Show',\n      place: 'Historic Theater',\n      description: 'Watch a local theater production or musical',\n      costPerPerson: 35,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'evening'\n    },\n    {\n      id: '16',\n      name: 'Garden Tour',\n      place: 'Botanical Gardens',\n      description: 'Explore beautiful gardens and exotic plants',\n      costPerPerson: 15,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'afternoon'\n    },\n    {\n      id: '17',\n      name: 'Nightlife Tour',\n      place: 'Entertainment District',\n      description: 'Experience the local nightlife and bars',\n      costPerPerson: 45,\n      category: 'activities',\n      duration: '3 hours',\n      bestTime: 'evening'\n    },\n    {\n      id: '18',\n      name: 'Adventure Park',\n      place: 'Outdoor Adventure Center',\n      description: 'Try zip-lining, rock climbing, and outdoor activities',\n      costPerPerson: 55,\n      category: 'activities',\n      duration: '4 hours',\n      bestTime: 'morning'\n    },\n    {\n      id: '19',\n      name: 'Historical Site Visit',\n      place: 'Ancient Ruins',\n      description: 'Explore historical monuments and archaeological sites',\n      costPerPerson: 20,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'morning'\n    },\n    {\n      id: '20',\n      name: 'Spa Experience',\n      place: 'Luxury Spa',\n      description: 'Relax with traditional treatments and massages',\n      costPerPerson: 80,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'afternoon'\n    },\n    {\n      id: '21',\n      name: 'Food Market Tour',\n      place: 'Local Market',\n      description: 'Explore local cuisine and food culture',\n      costPerPerson: 35,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'morning'\n    },\n    {\n      id: '22',\n      name: 'Photography Walk',\n      place: 'Scenic Routes',\n      description: 'Capture the best photo spots with a guide',\n      costPerPerson: 40,\n      category: 'activities',\n      duration: '3 hours',\n      bestTime: 'evening'\n    },\n    {\n      id: '23',\n      name: 'Local Festival',\n      place: 'Town Square',\n      description: 'Experience traditional celebrations and events',\n      costPerPerson: 15,\n      category: 'activities',\n      duration: '4 hours',\n      bestTime: 'afternoon'\n    },\n    {\n      id: '24',\n      name: 'Wine Tasting',\n      place: 'Vineyard',\n      description: 'Sample local wines and learn about production',\n      costPerPerson: 60,\n      category: 'activities',\n      duration: '2 hours',\n      bestTime: 'afternoon'\n    },\n    {\n      id: '25',\n      name: 'Hiking Trail',\n      place: 'Nature Reserve',\n      description: 'Explore scenic hiking paths and nature',\n      costPerPerson: 25,\n      category: 'activities',\n      duration: '4 hours',\n      bestTime: 'morning'\n    }\n  ];\n\n  const budgetAmount = parseInt(budget) || 1000;\n  const budgetBreakdown = {\n    food: {\n      total: Math.floor(budgetAmount * 0.3),\n      items: [\n        { name: \"Local Restaurant\", place: \"Downtown\", costPerPerson: Math.floor(budgetAmount * 0.15), description: \"Traditional local cuisine\" },\n        { name: \"Street Food\", place: \"Market Area\", costPerPerson: Math.floor(budgetAmount * 0.1), description: \"Authentic street food experience\" },\n        { name: \"Café\", place: \"City Center\", costPerPerson: Math.floor(budgetAmount * 0.05), description: \"Coffee and light meals\" }\n      ]\n    },\n    travel: {\n      total: Math.floor(budgetAmount * 0.25),\n      items: [\n        { name: \"Airport Transfer\", place: \"Airport to Hotel\", costPerPerson: Math.floor(budgetAmount * 0.1), description: \"Taxi or shuttle service\" },\n        { name: \"Local Transport\", place: \"City\", costPerPerson: Math.floor(budgetAmount * 0.1), description: \"Public transport and taxis\" },\n        { name: \"Intercity Travel\", place: \"Between cities\", costPerPerson: Math.floor(budgetAmount * 0.05), description: \"Train or bus tickets\" }\n      ]\n    },\n    accommodation: {\n      total: Math.floor(budgetAmount * 0.2),\n      items: [\n        { name: \"Hotel\", place: \"City Center\", costPerPerson: Math.floor(budgetAmount * 0.2), description: \"Comfortable accommodation\" }\n      ]\n    },\n    other: {\n      total: Math.floor(budgetAmount * 0.05),\n      items: [\n        { name: \"Souvenirs\", place: \"Local Shops\", costPerPerson: Math.floor(budgetAmount * 0.03), description: \"Memorabilia and gifts\" },\n        { name: \"Miscellaneous\", place: \"Various\", costPerPerson: Math.floor(budgetAmount * 0.02), description: \"Unexpected expenses\" }\n      ]\n    }\n  };\n\n  // Adjust activity prices based on currency (rough conversion for demo)\n  const getCurrencyMultiplier = (curr) => {\n    const multipliers = {\n      'USD': 1.0,\n      'EUR': 0.85,\n      'GBP': 0.75,\n      'JPY': 110,\n      'INR': 75,\n      'CAD': 1.25,\n      'AUD': 1.35\n    };\n    return multipliers[curr] || 1.0;\n  };\n\n  const currencyMultiplier = getCurrencyMultiplier(currency);\n  const adjustedActivities = mockActivities.map(activity => ({\n    ...activity,\n    costPerPerson: Math.round(activity.costPerPerson * currencyMultiplier)\n  }));\n\n  // Generate days based on numberOfDays\n  const generateDays = () => {\n    const days = [];\n    for (let i = 1; i <= numberOfDays; i++) {\n      const date = new Date(Date.now() + (i - 1) * 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n      const activitiesPerDay = Math.ceil(adjustedActivities.length / numberOfDays);\n      const startIndex = (i - 1) * activitiesPerDay;\n      const endIndex = Math.min(startIndex + activitiesPerDay, adjustedActivities.length);\n      \n      days.push({\n        day: i,\n        date: date,\n        activities: adjustedActivities.slice(startIndex, endIndex).map(activity => ({\n          time: '09:00',\n          activity: activity.name,\n          place: activity.place,\n          description: activity.description,\n          costPerPerson: activity.costPerPerson,\n          category: activity.category\n        }))\n      });\n    }\n    return days;\n  };\n\n  return {\n    itinerary: {\n      days: generateDays()\n    },\n    activities: adjustedActivities,\n    budgetBreakdown,\n    totalEstimatedCost: budgetAmount\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}